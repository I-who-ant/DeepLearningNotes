# 深度学习辅助代理规范 AGENTS

## 1. 文档目标
- 为团队快速构建、评估与维护辅助深度学习任务的智能体提供统一标准。
- 明确从数据准备到部署落地的关键方法与原理，降低试错成本。
- 保障设计遵循 SOLID、KISS、DRY、YAGNI 等工程原则，确保方案可维护、可扩展。

## 2. 适用场景
- 大模型或自动化脚本辅助构建、训练、评估深度学习模型。
- 设计面向研究人员或工程团队的智能辅助工具链。
- 需要在多角色、多模块之间协调深度学习工作流的协作场景。

## 3. 核心指导原则
- **清晰边界**：每个智能体聚焦单一职责，最小化耦合；超出范围的能力不要硬塞。
- **逐步扩展**：先验证关键路径，再封装扩展点；用接口抽象算法、数据与执行环境。
- **透明可追踪**：所有自动决策步骤都要记录输入、输出与决策理由，便于复现。
- **安全默认**：默认选择只读、沙箱或离线模式，需要写入或联网时显式授权。

## 4. 学习方法与原理
### 4.1 数据准备
- 明确任务类型（分类、回归、生成、强化等）并建立对应标签或反馈格式。
- 实施数据分层抽样与时间切分，保证训练集、验证集、测试集分布一致又不过拟合。
- 制定数据版本控制策略，记录获取渠道、清洗脚本、特征工程步骤与统计摘要。
- 建立数据质量守则：缺失值处理、异常检测、偏差评估、隐私合规。

### 4.2 模型选择
- 建立模型候选清单：基础模型、预训练模型、轻量化模型，按需求选择最简单可行方案。
- 分析模型结构与能力边界，确认其符合任务约束（实时性、内存、可解释性等）。
- 在引入复杂模型前，先用基准模型构建对照实验，验证改进是否显著且稳定。
- 制定模型接口契约：输入输出张量形状、数据类型、批量范围、错误处理策略。

### 4.3 训练与优化
- 采用渐进式调参：先验证学习率、批大小、正则化，再考虑高级技巧（混合精度、分布式）。
- 保持训练过程可观测：记录损失曲线、梯度范数、评估指标、资源使用。
- 明确早停与回滚机制，防止过拟合或资源浪费；周期性保存可复现的检查点。
- 对于自动化代理，约束其修改范围（配置文件、超参）并要求变更说明。

### 4.4 评估与验证
- 使用多维度指标（准确率、召回率、F1、AUC、延迟、吞吐、能耗）评估模型表现。
- 构建稳健的交叉验证或时间滑窗策略，衡量模型在不同数据段上的一致性。
- 针对关键场景建立对抗测试与边界测试，确保模型在极端输入下仍可控。
- 对比实验必须记录配置、代码版本、环境依赖，确保结果可复现。

### 4.5 推理与部署
- 规划环境一致性：训练、验证、部署的依赖版本要锁定并验证哈希。
- 定义服务接口与限流策略，确保高峰场景下的稳定性与降级方案。
- 建立模型监控：实时指标（延迟、错误率）+ 业务指标（转化、收益）。
- 设计回滚与灰度策略，支持快速切换到上一个稳定版本。

### 4.6 可解释性与合规
- 输出可解释特征贡献或可视化，帮助用户理解模型决策。
- 记录训练数据来源与处理流程，满足审计与合规（隐私、版权）。
- 明确模型风险边界（偏见、数据泄露），并提供缓解策略。
- 对外部调用的 API、库依赖进行安全审查与 License 核查。

## 5. 协作流程
- **需求澄清**：收集任务说明、约束条件、目标指标，形成需求单。
- **方案设计**：列出数据、模型、评估、部署的关键决策，召开评审确认。
- **执行落地**：遵循自动化脚本或流水线执行，所有变更经代码评审。
- **验收回顾**：完成实验报告、上线总结、经验沉淀，识别可复用资产。

## 6. 质量保证与检查清单
- 数据入库前完成统计快照、异常阈值、隐私脱敏检查。
- 模型训练脚本通过单元测试与端到端冒烟测试，关键函数覆盖率 > 80%。
- 推理接口建立契约测试与回归测试，确保升级不破坏历史行为。
- 文档、配置、代码版本一致，所有关键参数与路径集中管理并审计。

## 7. 常见风险与防护
- **数据漂移**：部署后监控特征分布，触发阈值自动告警并回滚。
- **配置漂移**：统一通过配置中心或 IaC 工具管理，禁止线下手改。
- **资源瓶颈**：预估显存、CPU、I/O 需求，预留 20% 安全余量。
- **安全合规**：敏感数据全程加密传输与存储，定期进行安全评估。

## 8. 推荐资源
- 课程：《Deep Learning Specialization》《CS231n》《fast.ai Practical Deep Learning》。
- 框架文档：PyTorch、TensorFlow、JAX 官方指南与最佳实践。
- 工具链：Weights & Biases、MLflow、DVC、TensorBoard、Great Expectations。
- 安全指南：NIST AI Risk Management Framework、ENISA AI Cybersecurity。
- 论文合集：arXiv ML Ops、AutoML、Explainable AI 专题。

> 按上述规范持续迭代，可快速构建可靠、可审计的深度学习辅助系统。
